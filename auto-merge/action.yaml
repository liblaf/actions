name: Auto Merge

author: liblaf

description: This GitHub Action automatically merges pending pull requests (PRs) generated by Release-Please. It filters PRs by a specified GitHub App author and label, then adds a custom label to the identified PR before merging. The action is configurable with inputs for the repository, GitHub token, labels, and app author.

inputs:
  add-label:
    description: Add labels by name
    required: false
    default: automerge
  app:
    description: Filter by GitHub App author
    required: false
    default: github-actions
  label:
    description: Filter by label
    required: false
    default: "autorelease: pending"
  repo:
    description: Repository name with owner
    required: false
    default: ${{ github.repository }}
  token:
    description: GitHub Token
    required: false
    default: ${{ github.token }}

runs:
  using: composite
  steps:
    - run: bash "${{ github.action_path }}/main.sh"
      shell: bash
      name: Merge
      env:
        GH_TOKEN: ${{ inputs.token }}
        INPUT_ADD_LABEL: ${{ inputs.add-label }}
        INPUT_APP: ${{ inputs.app }}
        INPUT_LABEL: ${{ inputs.label }}
        INPUT_REPO: ${{ inputs.repo }}
